(this["webpackJsonppokemons-kode"]=this["webpackJsonppokemons-kode"]||[]).push([[0],{123:function(e,t,n){e.exports=n.p+"static/media/preloader.691884b0.svg"},124:function(e,t,n){e.exports={filter:"Filter_filter__2NgZH"}},153:function(e,t,n){e.exports=n(279)},158:function(e,t,n){},162:function(e,t,n){},17:function(e,t,n){e.exports={formstyle:"FormsControls_formstyle__3-zhl",field:"FormsControls_field__3CL9f",formControl:"FormsControls_formControl__3lBOb",error:"FormsControls_error__1GgNm",formSummaryError:"FormsControls_formSummaryError__2Dms8",mainButton:"FormsControls_mainButton__2ZqJX"}},26:function(e,t,n){e.exports={body:"Pokemons_body__giwcN",pagedcards:"Pokemons_pagedcards__1SJz4",cards:"Pokemons_cards__3QcpW",filters:"Pokemons_filters__1aBXZ",card:"Pokemons_card__3dIKM",blinking:"Pokemons_blinking__2D7x-"}},279:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(54),s=n.n(r),c=(n(158),n(10)),l=n(8),i=(n(162),n(118)),u=n(127),m=n(17),p=n.n(m),g=n(117),d=function(e){return function(t){var n=t.input,a=t.meta,r=a.touched,s=a.error,c=Object(u.a)(t,["input","meta"]),l=r&&s;return o.a.createElement("div",{className:p.a.formControl+" "+(l?p.a.error:"")},o.a.createElement("div",null,o.a.createElement(e,Object.assign({},n,c))),l&&o.a.createElement("span",null,s))}},f=(d("textarea"),d("input")),k=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return o.a.createElement("div",{className:p.a.field},o.a.createElement("label",null,e),o.a.createElement(g.a,Object.assign({placeholder:e,name:t,validate:n,component:a},r))," ",s)},E=function(e){if(!e)return"Field is required"},h=n(9),b=n(29),_={login:null,token:null,correctLoginPass:!1,isAuth:!1},P=function(e,t){return{type:"auth/SET_USER_DATA",payload:{login:e,correctLoginPass:t}}},y=function(e,t){return{type:"auth/SET_AUTH",payload:{isAuth:e,token:t}}},v=function(){return function(e){e(P(null,!1)),e(y(!1,null)),localStorage.removeItem("token")}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":case"auth/SET_AUTH":case"auth/LOGIN_WITH_TOKEN":return Object(h.a)(Object(h.a)({},e),t.payload);default:return e}},O=Object(i.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return o.a.createElement("form",{onSubmit:t},k("Login","email",[E],f),k("Password","password",[E],f,{type:"password"}),n&&o.a.createElement("div",{className:p.a.formSummaryError},n),o.a.createElement("button",{className:p.a.mainButton},"\u2192"))})),T=Object(c.b)((function(e){return{isAuth:e.auth.isAuth,correctLoginPass:e.auth.correctLoginPass}}),{login:function(e,t){return function(n){n("kode@kode.ru"===e&&"Enk0deng"===t?P(e,!0):Object(b.a)("login",{_error:"Wrong login or password"}))}},loginWithToken:function(e){return function(t){t(function(e,t){return{type:"auth/LOGIN_WITH_TOKEN",payload:{token:t,login:e,isAuth:!0,correctLoginPass:!0}}}("kode@kode.ru",e))}}})((function(e){return localStorage.getItem("token")&&e.loginWithToken(localStorage.getItem("token")),e.correctLoginPass&&e.isAuth?o.a.createElement(l.a,{to:"/pokemons"}):e.correctLoginPass?o.a.createElement(l.a,{to:"/SMSconfirm"}):o.a.createElement("div",{className:p.a.formstyle},o.a.createElement(O,{onSubmit:function(t){e.login(t.email,t.password)}}))})),N=Object(i.a)({form:"OTP"})((function(e){var t=e.handleSubmit,n=e.error;return o.a.createElement("form",{onSubmit:t},k("Code from SMS","password",[E],f),n&&o.a.createElement("div",{className:p.a.formSummaryError},n),o.a.createElement("div",null,o.a.createElement("button",{className:p.a.mainButton},"\u2192")))})),C=Object(c.b)((function(e){return{isAuth:e.auth.isAuth,correctLoginPass:e.auth.correctLoginPass}}),{confirmSMS:function(e){return function(t){if("123456"===e){var n=localStorage.getItem("token");n||(n=Math.random().toString(),localStorage.setItem("token",n)),t(y(!0,n))}else t(Object(b.a)("OTP",{_error:"Wrong code from SMS"})),alert("Correct password is '123456'.")}}})((function(e){return e.correctLoginPass?e.isAuth?o.a.createElement(l.a,{to:"/pokemons"}):o.a.createElement("div",{className:p.a.formstyle},o.a.createElement(N,{onSubmit:function(t){e.confirmSMS(t.password)}})):o.a.createElement(l.a,{to:"/login"})})),j=n(57),I=n(58),A=n(61),w=n(60),L=n(7),F=n(37),x=n.n(F),B=n(59),M=n(122).create({baseURL:"https://api.pokemontcg.io/v1/"}),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return M.get("cards?page=".concat(e,"&pageSize=").concat(t,"&types=").concat(n,"&subtype=").concat(a)).then((function(e){return e}))},D=function(e){return M.get("cards/".concat(e)).then((function(e){return e.data}))},R=function(){return M.get("types").then((function(e){return e.data}))},U=function(){return M.get("subtypes").then((function(e){return e.data}))},G={pokemon:null},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profilePage/SET_USER_PROFILE":return Object(h.a)(Object(h.a)({},e),{},{pokemon:t.pokemon});default:return e}},K=n(123),W=n.n(K),q=n(86),V=n.n(q),J=function(){return o.a.createElement("div",{className:V.a.preloaderBody},o.a.createElement("img",{className:V.a.preloader,src:W.a,alt:"loaging..."}))},X=n(63),Z=n.n(X),Y=n(16),Q=function(e){return o.a.createElement("header",{className:Z.a.header},e.routeBack?o.a.createElement("div",{className:Z.a.backBtn},o.a.createElement(Y.b,{to:e.routeBack},o.a.createElement("button",{type:"button",className:"btn btn-outline-secondary"},"< Back"))):o.a.createElement("div",null),o.a.createElement("div",{className:Z.a.loginBlock},o.a.createElement(Y.b,{to:"/login"},o.a.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:e.logout},"Log out"))))},$=n(31),ee=n.n($),te=function(e){var t=e.card;return t?o.a.createElement("div",{className:ee.a.fullPokemonInfo},o.a.createElement(Q,{logout:e.logout,routeBack:"/pokemons"}),o.a.createElement("div",{className:ee.a.pokemonPage},o.a.createElement("img",{src:t.imageUrl,alt:"pokemon"}),o.a.createElement("div",{className:ee.a.pokemonInfo},o.a.createElement("div",{className:ee.a.mainInfo},o.a.createElement("div",null,o.a.createElement("b",null,"Pokemon name")," ",t.name),o.a.createElement("div",null,o.a.createElement("b",null,"Type")," ",t.types),o.a.createElement("div",null,o.a.createElement("b",null,"SubType")," ",t.subtype)),o.a.createElement("div",{className:ee.a.extraInfo},void 0!==t.attacks?o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("b",null,"attackDamage"),"  ",t.attacks[0].damage),o.a.createElement("div",null,o.a.createElement("b",null,"attackCost"),"  ",t.attacks[0].cost)):null,void 0!==t.resistances?o.a.createElement("div",null,o.a.createElement("b",null,"resistances"),"  ",t.resistances[0].type,": ",t.resistances[0].value," "):null,o.a.createElement("div",null,o.a.createElement("b",null,"evolvesFrom"),"  ",t.evolvesFrom)))),void 0!==t.attacks?o.a.createElement("div",{className:ee.a.attacksDescription},t.attacks[0].text):null):o.a.createElement(J,null)},ne=function(e){Object(A.a)(n,e);var t=Object(w.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"refreshPokemonPage",value:function(){var e=this.props.match.params.id;this.props.isAuth||this.props.history.push("/login"),this.props.getPokemonPage(e)}},{key:"componentDidMount",value:function(){this.refreshPokemonPage()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.refreshPokemonPage()}},{key:"render",value:function(){return o.a.createElement(te,Object.assign({},this.props.pokemon,{logout:this.props.logout}))}}]),n}(o.a.Component),ae=Object(L.d)(Object(c.b)((function(e){return{pokemon:e.pokemonPage.pokemon,isAuth:e.auth.isAuth}}),{getPokemonPage:function(e){return function(){var t=Object(B.a)(x.a.mark((function t(n){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(e);case 2:a=t.sent,n({type:"profilePage/SET_USER_PROFILE",pokemon:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:v}),l.g)(ne),oe="pokemonsPage/SET_POKEMONS",re={pokemons:[],types:[],subtypes:[],selectedType:"",selectedSubtype:"",pageSize:4,totalPokemonsCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},se=function(e){return{type:"pokemonsPage/TOGGLE_IS_FETCHING",isFetching:e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(h.a)(Object(h.a)({},e),{},{pokemons:t.pokemons});case"pokemonsPage/SET_POKEMON_FILTERS":return Object(h.a)(Object(h.a)({},e),{},{types:t.types,subtypes:t.subtypes});case"pokemonsPage/SET_SELECTED_FILTERS":return Object(h.a)(Object(h.a)({},e),{},{selectedType:t.selectedType,selectedSubtype:t.selectedSubtype});case"pokemonsPage/SET_CURRENT_PAGE":return Object(h.a)(Object(h.a)({},e),{},{currentPage:t.currentPage});case"pokemonsPage/SET_TOTAL_POKEMONS_COUNT":return Object(h.a)(Object(h.a)({},e),{},{totalPokemonsCount:t.totalPokemonsCount});case"pokemonsPage/TOGGLE_IS_FETCHING":return Object(h.a)(Object(h.a)({},e),{},{isFetching:t.isFetching});default:return e}},le=function(e){return e.pokemonsPage.pokemons},ie=function(e){return e.pokemonsPage.types},ue=function(e){return e.pokemonsPage.subtypes},me=function(e){return e.pokemonsPage.selectedType},pe=function(e){return e.pokemonsPage.selectedSubtype},ge=function(e){return e.pokemonsPage.pageSize},de=function(e){return e.pokemonsPage.totalPokemonsCount},fe=function(e){return e.pokemonsPage.currentPage},ke=function(e){return e.pokemonsPage.isFetching},Ee=n(124),he=n.n(Ee),be=function(e){return o.a.createElement("div",{className:he.a.filter},o.a.createElement("select",{onChange:function(t){return e.setSelect(t.target.value)},value:e.choosenValue?e.choosenValue:e.filterName},o.a.createElement("option",{hidden:!0,value:e.filterName},e.filterName),e.items.map((function(e){return o.a.createElement("option",{key:e,value:e}," ",e," ")}))))},_e=n(126),Pe=n(64),ye=n.n(Pe),ve=function(e){for(var t=e.totalItemsCount,n=e.pageSize,r=e.currentPage,s=e.onPageChanged,c=e.portionSize,l=void 0===c?5:c,i=Math.ceil(t/n),u=[],m=1;m<=i;m++)u.push(m);var p=Math.ceil(i/l),g=Object(a.useState)(1),d=Object(_e.a)(g,2),f=d[0],k=d[1],E=(f-1)*l+1,h=f*l;return p&&f>p&&k(p),o.a.createElement("div",{className:ye.a.pages},f>1&&o.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(){k(f-1)}},"\xab"),u.filter((function(e){return e>=E&&e<=h})).map((function(e){return o.a.createElement("span",{key:e,className:r===e?ye.a.selectedPage:ye.a.pagesNumber,onClick:function(t){s(e)}}," ",e," ")})),p>f&&o.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(){k(f+1)}},"\xbb"))},Se=n(26),Oe=n.n(Se),Te=function(e){var t=e.pokemon;return o.a.createElement("div",{key:t.id,className:"card bg-light"},o.a.createElement("div",{className:Oe.a.card},o.a.createElement("span",null,o.a.createElement(Y.b,{to:"/pokemon/"+t.id},o.a.createElement("img",{className:"card-img-top",src:t.imageUrl,alt:"pokemon"}))),o.a.createElement("span",null,o.a.createElement("span",{className:Oe.a.pokemonInfo},o.a.createElement("div",{className:"card-title"},o.a.createElement("b",null,t.name)),o.a.createElement("div",{className:"card-text"}," ",t.artist," ")))))},Ne=function(e){return o.a.createElement("div",null,o.a.createElement(Q,{logout:e.logout,routeBack:""}),o.a.createElement("div",{className:Oe.a.body},o.a.createElement("div",{className:Oe.a.filters},o.a.createElement(be,{items:e.types,filterName:"Type",setSelect:e.setType,choosenValue:e.selectedType}),o.a.createElement(be,{items:e.subtypes,filterName:"Subtype",setSelect:e.setSubtype,choosenValue:e.selectedSubtype})),o.a.createElement("div",{className:Oe.a.pagedcards},o.a.createElement("div",{className:Oe.a.cards},0!==e.pokemons.length?e.pokemons.map((function(e){return o.a.createElement(Te,{pokemon:e,key:e.id})})):o.a.createElement("div",null,"No pokemons with these filters! Try to change filters or pages. Your current page is ",e.currentPage,".")),o.a.createElement(ve,{currentPage:e.currentPage,totalItemsCount:e.totalPokemonsCount,pageSize:e.pageSize,onPageChanged:e.onPageChanged}))))},Ce=function(e){Object(A.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onPageChanged=function(t){var n=e.props,a=n.pageSize,o=n.selectedSubtype,r=n.selectedType;e.props.requestPokemons(t,a,r,o),e.props.setCurrentPage(t)},e.setType=function(t){var n=e.props,a=n.currentPage,o=n.pageSize,r=n.selectedSubtype;e.props.requestPokemons(a,o,t,r)},e.setSubtype=function(t){var n=e.props,a=n.currentPage,o=n.pageSize,r=n.selectedType;e.props.requestPokemons(a,o,r,t)},e}return Object(I.a)(n,[{key:"componentDidMount",value:function(){this.props.isAuth||this.props.history.push("/login");var e=this.props,t=e.currentPage,n=e.pageSize,a=e.selectedSubtype,o=e.selectedType;this.props.requestPokemons(t,n,o,a)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.props.isFetching?o.a.createElement(J,null):null,o.a.createElement(Ne,{totalPokemonsCount:this.props.totalPokemonsCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,pokemons:this.props.pokemons,types:this.props.types,subtypes:this.props.subtypes,logout:this.props.logout,setType:this.setType,setSubtype:this.setSubtype,selectedType:this.props.selectedType,selectedSubtype:this.props.selectedSubtype}))}}]),n}(o.a.Component),je=Object(L.d)(Object(c.b)((function(e){return{pokemons:le(e),types:ie(e),subtypes:ue(e),pageSize:ge(e),totalPokemonsCount:de(e),currentPage:fe(e),isFetching:ke(e),selectedType:me(e),selectedSubtype:pe(e),isAuth:e.auth.isAuth}}),{setCurrentPage:function(e){return{type:"pokemonsPage/SET_CURRENT_PAGE",currentPage:e}},requestPokemons:function(e,t,n,a){return function(){var o=Object(B.a)(x.a.mark((function o(r){var s,c,l;return x.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r(se(!0)),o.next=3,z(e,t,n,a);case 3:return s=o.sent,o.next=6,R();case 6:return c=o.sent,o.next=9,U();case 9:l=o.sent,r(se(!1)),r((m=s.data.cards,{type:oe,pokemons:m})),r((i=c.types,u=l.subtypes,{type:"pokemonsPage/SET_POKEMON_FILTERS",types:i,subtypes:u})),r({type:"pokemonsPage/SET_SELECTED_FILTERS",selectedType:n,selectedSubtype:a}),r({type:"pokemonsPage/SET_TOTAL_POKEMONS_COUNT",totalPokemonsCount:s.headers["total-count"]});case 15:case"end":return o.stop()}var i,u,m}),o)})));return function(e){return o.apply(this,arguments)}}()},logout:v}),l.g)(Ce);var Ie=Object(c.b)((function(e){return{isAith:e.auth.isAuth}}))((function(e){return o.a.createElement("div",{className:"App"},o.a.createElement(l.d,null,o.a.createElement(l.b,{path:"*",render:function(){return e.isAuth?o.a.createElement(l.a,{to:"/pokemons"}):o.a.createElement(l.a,{to:"/login"})}}),o.a.createElement(l.b,{path:"/pokemon/:id?",render:function(){return o.a.createElement(ae,null)}}),o.a.createElement(l.b,{path:"/pokemons",render:function(){return o.a.createElement(je,null)}}),o.a.createElement(l.b,{path:"/login",render:function(){return o.a.createElement(T,null)}}),o.a.createElement(l.b,{path:"/SMSconfirm",component:C})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ae=n(125),we=n(119),Le=Object(L.c)({pokemonsPage:ce,pokemonPage:H,auth:S,form:we.a}),Fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.d,xe=Object(L.e)(Le,Fe(Object(L.a)(Ae.a)));s.a.render(o.a.createElement(Y.a,null,o.a.createElement(c.a,{store:xe},o.a.createElement(Ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t,n){e.exports={pokemonPage:"PokemonPage_pokemonPage__eSNxr",fullPokemonInfo:"PokemonPage_fullPokemonInfo__1L4ei",pokemonInfo:"PokemonPage_pokemonInfo__2fn8a",attacksDescription:"PokemonPage_attacksDescription__3d2P4",mainInfo:"PokemonPage_mainInfo__366a-",extraInfo:"PokemonPage_extraInfo__iGO7D"}},63:function(e,t,n){e.exports={header:"Header_header__107il",backBtn:"Header_backBtn__3KTOU",loginBlock:"Header_loginBlock__2l26M",blinking:"Header_blinking__gF8fF"}},64:function(e,t,n){e.exports={selectedPage:"Paginator_selectedPage__1jiz-",pages:"Paginator_pages__1IgW2",pagesNumber:"Paginator_pagesNumber__2o3PY",blinking:"Paginator_blinking__1AHKA"}},86:function(e,t,n){e.exports={preloader:"Preloader_preloader__1wTDC",preloaderBody:"Preloader_preloaderBody__370Kx",appear:"Preloader_appear__S-6xx"}}},[[153,1,2]]]);
//# sourceMappingURL=main.3dac54cd.chunk.js.map